(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[22],{816:(e,t,s)=>{"use strict";s.d(t,{ExpenseProvider:()=>c,F:()=>n});var r=s(5155),a=s(2115);let l=(0,a.createContext)(void 0);function n(){let e=(0,a.useContext)(l);if(!e)throw Error("useExpenses must be used within an ExpenseProvider");return e}function c(e){let{children:t}=e,[s,n]=(0,a.useState)([]),[c,i]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{let e=localStorage.getItem("expenses");if(e)try{n(JSON.parse(e))}catch(e){console.error("Error parsing stored expenses:",e)}i(!1)},[]),(0,a.useEffect)(()=>{c||localStorage.setItem("expenses",JSON.stringify(s))},[s,c]),(0,r.jsx)(l.Provider,{value:{expenses:s,addExpense:function(e){n(t=>[...t,e])},updateExpense:function(e){n(t=>t.map(t=>t.id===e.id?e:t))},deleteExpense:function(e){n(t=>t.filter(t=>t.id!==e))},loading:c},children:t})}},7150:(e,t,s)=>{Promise.resolve().then(s.bind(s,9680))},9680:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(5155),a=s(816),l=s(2502),n=s(2115),c=s(4065);function i(){let{expenses:e}=(0,a.F)(),[t,s]=(0,n.useState)("monthly"),l=e=>new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB"}).format(e),i=()=>{let t={};return[...e].sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime()).forEach(e=>{let s=new Date(e.date),r="".concat(s.getFullYear(),"-").concat(String(s.getMonth()+1).padStart(2,"0"));t[r]||(t[r]=0),t[r]+=e.amount}),Object.entries(t).map(e=>{let[t,s]=e,[r,a]=t.split("-"),l=["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"][parseInt(a)-1];return{period:"".concat(l," ").concat(r),total:s}})},d=()=>{let t={};return e.forEach(e=>{let s=new Date(e.date).getFullYear().toString();t[s]||(t[s]=0),t[s]+=e.amount}),Object.entries(t).map(e=>{let[t,s]=e;return{period:t,total:s}})},o=()=>{let t={},s={housing:"Жилье",food:"Питание",transportation:"Транспорт",utilities:"Коммунальные услуги",entertainment:"Развлечения",healthcare:"Медицина",personal:"Личные расходы",other:"Другое"};return e.forEach(e=>{t[e.category]||(t[e.category]=0),t[e.category]+=e.amount}),Object.entries(t).map(e=>{let[t,r]=e;return{period:s[t]||"Другое",total:r}})},m=(()=>{switch(t){case"monthly":return i();case"yearly":return d();case"category":return o();default:return[]}})(),x={labels:m.map(e=>e.period),datasets:[{label:"Сумма расходов",data:m.map(e=>e.total),backgroundColor:"#2563eb",borderRadius:6,maxBarThickness:40}]};m.length>0&&m.map(e=>e.total);let h=m.reduce((e,t)=>e+t.total,0),u=m.length>0?h/m.length:0;return(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Отчеты по расходам"}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"Тенденции расходов"}),(0,r.jsxs)("select",{value:t,onChange:e=>s(e.target.value),className:"p-2 border border-gray-300 rounded-md text-sm",children:[(0,r.jsx)("option",{value:"monthly",children:"По месяцам"}),(0,r.jsx)("option",{value:"yearly",children:"По годам"}),(0,r.jsx)("option",{value:"category",children:"По категориям"})]})]}),(0,r.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:m.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"h-80",children:(0,r.jsx)(c.yP,{data:x,options:{responsive:!0,plugins:{legend:{display:!1},title:{display:!1},tooltip:{callbacks:{label:function(e){return l(e.parsed.y)}}}},scales:{y:{beginAtZero:!0,ticks:{callback:function(e){return l(Number(e))}}}}}})}),(0,r.jsxs)("div",{className:"mt-8 pt-6 border-t border-gray-200 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Общая сумма"}),(0,r.jsx)("p",{className:"text-xl font-semibold text-gray-800",children:l(h)})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["В среднем на ",(()=>{switch(t){case"monthly":return"месяц";case"yearly":return"год";case"category":return"категорию";default:return"период"}})()]}),(0,r.jsx)("p",{className:"text-xl font-semibold text-gray-800",children:l(u)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Количество периодов"}),(0,r.jsx)("p",{className:"text-xl font-semibold text-gray-800",children:m.length})]})]})]}):(0,r.jsx)("div",{className:"py-16 text-center text-gray-500",children:"Пока нет расходов. Добавьте расходы, чтобы сформировать отчеты."})})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Анализ"}),(0,r.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:m.length>0?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("p",{className:"text-gray-700",children:["Ваш отчет по ","monthly"===t?"месячным":"yearly"===t?"годовым":"категориям"," расходам показывает ваши модели расходов с течением времени. Используйте эту информацию для выявления тенденций и возможностей экономии."]}),m.length>1&&(0,r.jsxs)("div",{className:"p-4 bg-blue-50 rounded-md",children:[(0,r.jsx)("h3",{className:"font-medium mb-2",children:"Анализ тенденций расходов"}),(0,r.jsxs)("p",{className:"text-sm text-gray-700",children:["monthly"===t&&"Ваши ежемесячные расходы показывают, как ваши траты меняются в течение года. Ищите сезонные закономерности или неожиданные всплески.","yearly"===t&&"Ваши годовые расходы показывают долгосрочные финансовые тенденции. Сравните год к году, чтобы увидеть, сокращаете ли вы расходы со временем.","category"===t&&"Ваше распределение по категориям показывает, куда уходит большая часть ваших денег. Сосредоточьтесь на сокращении расходов в самых крупных категориях трат."]})]}),(0,r.jsxs)("div",{className:"p-4 bg-green-50 rounded-md",children:[(0,r.jsx)("h3",{className:"font-medium mb-2",children:"Советы по экономии"}),(0,r.jsxs)("ul",{className:"text-sm text-gray-700 space-y-2",children:[(0,r.jsx)("li",{children:"• Установите бюджет для каждой категории на основе ваших исторических трат."}),(0,r.jsx)("li",{children:"• Ищите закономерности в месяцах с самыми высокими расходами и планируйте заранее."}),(0,r.jsx)("li",{children:"• Пересмотрите регулярные расходы для поиска возможностей торговаться или исключить их."})]})]})]}):(0,r.jsx)("p",{className:"text-gray-500",children:"Добавьте расходы, чтобы увидеть персонализированные аналитику и анализ."})})]})]})}l.t1.register(l.PP,l.kc,l.E8,l.hE,l.m_,l.s$)}},e=>{var t=t=>e(e.s=t);e.O(0,[647,579,441,684,358],()=>t(7150)),_N_E=e.O()}]);