(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{816:(e,t,s)=>{"use strict";s.d(t,{ExpenseProvider:()=>d,F:()=>l});var a=s(5155),r=s(2115);let n=(0,r.createContext)(void 0);function l(){let e=(0,r.useContext)(n);if(!e)throw Error("useExpenses must be used within an ExpenseProvider");return e}function d(e){let{children:t}=e,[s,l]=(0,r.useState)([]),[d,i]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{let e=localStorage.getItem("expenses");if(e)try{l(JSON.parse(e))}catch(e){console.error("Error parsing stored expenses:",e)}i(!1)},[]),(0,r.useEffect)(()=>{d||localStorage.setItem("expenses",JSON.stringify(s))},[s,d]),(0,a.jsx)(n.Provider,{value:{expenses:s,addExpense:function(e){l(t=>[...t,e])},updateExpense:function(e){l(t=>t.map(t=>t.id===e.id?e:t))},deleteExpense:function(e){l(t=>t.filter(t=>t.id!==e))},loading:d},children:t})}},3792:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var a=s(5155),r=s(5534),n=s(816),l=s(6874),d=s.n(l),i=s(2115);function c(){let{expenses:e,addExpense:t}=(0,n.F)(),[s,l]=(0,i.useState)(!1),c=new Date,o=c.getMonth(),m=c.getFullYear(),x=e.filter(e=>{let t=new Date(e.date);return t.getMonth()===o&&t.getFullYear()===m}).reduce((e,t)=>e+t.amount,0),u=0===o?11:o-1,h=0===o?m-1:m,g=e.filter(e=>{let t=new Date(e.date);return t.getMonth()===u&&t.getFullYear()===h}).reduce((e,t)=>e+t.amount,0),p={};e.forEach(e=>{let t=new Date(e.date),s="".concat(t.getFullYear(),"-").concat(t.getMonth());p[s]||(p[s]=0),p[s]+=e.amount});let b=Object.values(p),j=b.length>0?b.reduce((e,t)=>e+t,0)/b.length:0,f=[...e].sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()).slice(0,5),N=e=>new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB"}).format(e),y=e=>({housing:"\uD83C\uDFE0",food:"\uD83C\uDF4E",transportation:"\uD83D\uDE97",utilities:"⚡",entertainment:"\uD83C\uDFAC",healthcare:"\uD83C\uDFE5",personal:"\uD83D\uDC64",other:"\uD83D\uDCE6"})[e]||"\uD83D\uDCE6",v=e=>({housing:"Жилье",food:"Питание",transportation:"Транспорт",utilities:"Коммунальные услуги",entertainment:"Развлечения",healthcare:"Медицина",personal:"Личные расходы",other:"Другое"})[e]||"Другое";return(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("header",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-center text-gray-800",children:"Учет домашних расходов"}),(0,a.jsx)("p",{className:"text-center text-gray-600 mt-2",children:"Отслеживайте и управляйте вашими ежедневными расходами"})]}),s?(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsx)(r.A,{onSubmit:e=>{t(e),l(!1)},onCancel:()=>{l(!1)}})}):(0,a.jsxs)("main",{children:[(0,a.jsx)("section",{className:"mb-8",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Краткая сводка"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"bg-blue-50 p-4 rounded-md",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Текущий месяц"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:N(x)})]}),(0,a.jsxs)("div",{className:"bg-green-50 p-4 rounded-md",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Прошлый месяц"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-green-600",children:N(g)})]}),(0,a.jsxs)("div",{className:"bg-purple-50 p-4 rounded-md",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Среднемесячные расходы"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:N(j)})]})]})]})}),(0,a.jsx)("section",{className:"mb-8",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Последние расходы"}),(0,a.jsx)("button",{onClick:()=>l(!0),className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md text-sm",children:"Добавить расход"})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-50",children:[(0,a.jsx)("th",{className:"py-2 px-4 text-left text-sm font-medium text-gray-500",children:"Дата"}),(0,a.jsx)("th",{className:"py-2 px-4 text-left text-sm font-medium text-gray-500",children:"Категория"}),(0,a.jsx)("th",{className:"py-2 px-4 text-left text-sm font-medium text-gray-500",children:"Описание"}),(0,a.jsx)("th",{className:"py-2 px-4 text-left text-sm font-medium text-gray-500",children:"Сумма"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:f.length>0?f.map(e=>(0,a.jsxs)("tr",{className:"text-sm",children:[(0,a.jsx)("td",{className:"py-3 px-4",children:new Date(e.date).toLocaleDateString("ru-RU")}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsxs)("span",{className:"inline-flex items-center",children:[(0,a.jsx)("span",{className:"mr-2",children:y(e.category)}),v(e.category)]})}),(0,a.jsx)("td",{className:"py-3 px-4",children:e.description}),(0,a.jsx)("td",{className:"py-3 px-4 font-medium",children:N(e.amount)})]},e.id)):(0,a.jsx)("tr",{className:"text-sm",children:(0,a.jsx)("td",{colSpan:4,className:"py-3 px-4 text-center text-gray-500",children:"Пока нет расходов. Добавьте первый!"})})})]})}),f.length>0&&(0,a.jsx)("div",{className:"mt-4 text-right",children:(0,a.jsx)(d(),{href:"/expenses",className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Просмотреть все расходы →"})})]})}),(0,a.jsx)("section",{children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Категории"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md text-center",children:[(0,a.jsx)("div",{className:"text-orange-500 mb-2",children:"\uD83C\uDFE0"}),(0,a.jsx)("p",{className:"text-sm font-medium",children:"Жилье"})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md text-center",children:[(0,a.jsx)("div",{className:"text-green-500 mb-2",children:"\uD83C\uDF4E"}),(0,a.jsx)("p",{className:"text-sm font-medium",children:"Питание"})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md text-center",children:[(0,a.jsx)("div",{className:"text-blue-500 mb-2",children:"\uD83D\uDE97"}),(0,a.jsx)("p",{className:"text-sm font-medium",children:"Транспорт"})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md text-center",children:[(0,a.jsx)("div",{className:"text-purple-500 mb-2",children:"⚡"}),(0,a.jsx)("p",{className:"text-sm font-medium",children:"Коммунальные услуги"})]})]})]})})]})]})}},5534:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var a=s(5155),r=s(2115);let n=[{id:"housing",name:"Жилье",emoji:"\uD83C\uDFE0"},{id:"food",name:"Питание",emoji:"\uD83C\uDF4E"},{id:"transportation",name:"Транспорт",emoji:"\uD83D\uDE97"},{id:"utilities",name:"Коммунальные услуги",emoji:"⚡"},{id:"entertainment",name:"Развлечения",emoji:"\uD83C\uDFAC"},{id:"healthcare",name:"Медицина",emoji:"\uD83C\uDFE5"},{id:"personal",name:"Личные расходы",emoji:"\uD83D\uDC64"},{id:"other",name:"Другое",emoji:"\uD83D\uDCE6"}];function l(e){let{onSubmit:t,onCancel:s,initialData:l}=e,[d,i]=(0,r.useState)({date:(null==l?void 0:l.date)||new Date().toISOString().split("T")[0],category:(null==l?void 0:l.category)||"housing",description:(null==l?void 0:l.description)||"",amount:(null==l?void 0:l.amount)||""}),c=e=>{let{name:t,value:s}=e.target;i(e=>({...e,[t]:s}))};return(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:l?"Изменить расход":"Добавить новый расход"}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t({...d,amount:parseFloat(d.amount),id:(null==l?void 0:l.id)||Date.now().toString()})},children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 mb-1",children:"Дата"}),(0,a.jsx)("input",{type:"date",id:"date",name:"date",value:d.date,onChange:c,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:"Категория"}),(0,a.jsx)("select",{id:"category",name:"category",value:d.category,onChange:c,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",required:!0,children:n.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.emoji," ",e.name]},e.id))})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Описание"}),(0,a.jsx)("input",{type:"text",id:"description",name:"description",value:d.description,onChange:c,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{htmlFor:"amount",className:"block text-sm font-medium text-gray-700 mb-1",children:"Сумма (₽)"}),(0,a.jsx)("input",{type:"number",id:"amount",name:"amount",value:d.amount,onChange:c,step:"0.01",min:"0.01",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)("button",{type:"button",onClick:s,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-transparent rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Отмена"}),(0,a.jsxs)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[l?"Обновить":"Добавить"," расход"]})]})]})]})}},6768:(e,t,s)=>{Promise.resolve().then(s.bind(s,3792))}},e=>{var t=t=>e(e.s=t);e.O(0,[874,441,684,358],()=>t(6768)),_N_E=e.O()}]);