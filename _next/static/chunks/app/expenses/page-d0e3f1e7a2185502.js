(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[522],{816:(e,t,s)=>{"use strict";s.d(t,{ExpenseProvider:()=>l,F:()=>i});var r=s(5155),a=s(2115);let n=(0,a.createContext)(void 0);function i(){let e=(0,a.useContext)(n);if(!e)throw Error("useExpenses must be used within an ExpenseProvider");return e}function l(e){let{children:t}=e,[s,i]=(0,a.useState)([]),[l,o]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{let e=localStorage.getItem("expenses");if(e)try{i(JSON.parse(e))}catch(e){console.error("Error parsing stored expenses:",e)}o(!1)},[]),(0,a.useEffect)(()=>{l||localStorage.setItem("expenses",JSON.stringify(s))},[s,l]),(0,r.jsx)(n.Provider,{value:{expenses:s,addExpense:function(e){i(t=>[...t,e])},updateExpense:function(e){i(t=>t.map(t=>t.id===e.id?e:t))},deleteExpense:function(e){i(t=>t.filter(t=>t.id!==e))},loading:l},children:t})}},5534:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var r=s(5155),a=s(2115);let n=[{id:"housing",name:"Жилье",emoji:"\uD83C\uDFE0"},{id:"food",name:"Питание",emoji:"\uD83C\uDF4E"},{id:"transportation",name:"Транспорт",emoji:"\uD83D\uDE97"},{id:"utilities",name:"Коммунальные услуги",emoji:"⚡"},{id:"entertainment",name:"Развлечения",emoji:"\uD83C\uDFAC"},{id:"healthcare",name:"Медицина",emoji:"\uD83C\uDFE5"},{id:"personal",name:"Личные расходы",emoji:"\uD83D\uDC64"},{id:"other",name:"Другое",emoji:"\uD83D\uDCE6"}];function i(e){let{onSubmit:t,onCancel:s,initialData:i}=e,[l,o]=(0,a.useState)({date:(null==i?void 0:i.date)||new Date().toISOString().split("T")[0],category:(null==i?void 0:i.category)||"housing",description:(null==i?void 0:i.description)||"",amount:(null==i?void 0:i.amount)||""}),d=e=>{let{name:t,value:s}=e.target;o(e=>({...e,[t]:s}))};return(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:i?"Изменить расход":"Добавить новый расход"}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t({...l,amount:parseFloat(l.amount),id:(null==i?void 0:i.id)||Date.now().toString()})},children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 mb-1",children:"Дата"}),(0,r.jsx)("input",{type:"date",id:"date",name:"date",value:l.date,onChange:d,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:"Категория"}),(0,r.jsx)("select",{id:"category",name:"category",value:l.category,onChange:d,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",required:!0,children:n.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.emoji," ",e.name]},e.id))})]})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Описание"}),(0,r.jsx)("input",{type:"text",id:"description",name:"description",value:l.description,onChange:d,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{htmlFor:"amount",className:"block text-sm font-medium text-gray-700 mb-1",children:"Сумма (₽)"}),(0,r.jsx)("input",{type:"number",id:"amount",name:"amount",value:l.amount,onChange:d,step:"0.01",min:"0.01",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,r.jsx)("button",{type:"button",onClick:s,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-transparent rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Отмена"}),(0,r.jsxs)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[i?"Обновить":"Добавить"," расход"]})]})]})]})}},5682:(e,t,s)=>{Promise.resolve().then(s.bind(s,7324))},7324:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(5155),a=s(5534),n=s(816),i=s(2115);function l(){let{expenses:e,addExpense:t,updateExpense:s,deleteExpense:l}=(0,n.F)(),[o,d]=(0,i.useState)(!1),[c,m]=(0,i.useState)(null),[u,x]=(0,i.useState)(""),[p,h]=(0,i.useState)(""),g=e=>{m(e),d(!0)},b=e=>{window.confirm("Вы уверены, что хотите удалить этот расход?")&&l(e)},f=Array.from(new Set(e.map(e=>e.category))),y=[...e.filter(e=>{let t=e.description.toLowerCase().includes(u.toLowerCase()),s=!p||e.category===p;return t&&s})].sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()),j=e=>new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB"}).format(e),N=e=>({housing:"\uD83C\uDFE0",food:"\uD83C\uDF4E",transportation:"\uD83D\uDE97",utilities:"⚡",entertainment:"\uD83C\uDFAC",healthcare:"\uD83C\uDFE5",personal:"\uD83D\uDC64",other:"\uD83D\uDCE6"})[e]||"\uD83D\uDCE6",v=e=>({housing:"Жилье",food:"Питание",transportation:"Транспорт",utilities:"Коммунальные услуги",entertainment:"Развлечения",healthcare:"Медицина",personal:"Личные расходы",other:"Другое"})[e]||"Другое";return(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Управление расходами"}),o?(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsx)(a.A,{onSubmit:e=>{c?s(e):t(e),d(!1),m(null)},onCancel:()=>{d(!1),m(null)},initialData:c})}):(0,r.jsxs)("div",{className:"mb-6 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 md:w-2/3",children:[(0,r.jsx)("input",{type:"text",placeholder:"Поиск расходов...",value:u,onChange:e=>x(e.target.value),className:"p-2 border border-gray-300 rounded-md w-full"}),(0,r.jsxs)("select",{value:p,onChange:e=>h(e.target.value),className:"p-2 border border-gray-300 rounded-md w-full md:w-1/3",children:[(0,r.jsx)("option",{value:"",children:"Все категории"}),f.map(e=>(0,r.jsxs)("option",{value:e,children:[N(e)," ",v(e)]},e))]})]}),(0,r.jsx)("button",{onClick:()=>{m(null),d(!0)},className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium",children:"Добавить новый расход"})]}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow",children:y.length>0?(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Дата"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Категория"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Описание"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Сумма"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Действия"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:y.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.date).toLocaleDateString("ru-RU")}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,r.jsxs)("span",{className:"inline-flex items-center",children:[(0,r.jsx)("span",{className:"mr-2",children:N(e.category)}),v(e.category)]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.description}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:j(e.amount)}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,r.jsx)("button",{onClick:()=>g(e),className:"text-blue-600 hover:text-blue-900 mr-4",children:"Изменить"}),(0,r.jsx)("button",{onClick:()=>b(e.id),className:"text-red-600 hover:text-red-900",children:"Удалить"})]})]},e.id))})]})}):(0,r.jsx)("div",{className:"py-8 text-center text-gray-500",children:u||p?"Не найдено расходов, соответствующих поиску.":"Пока нет расходов. Добавьте первый!"})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(5682)),_N_E=e.O()}]);